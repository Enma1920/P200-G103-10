<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <title>Brick Pong</title>
</head>
<body>
    <div id="container">
        <div class="menu">
            <h1 class="menu-title">brick pong</h1>

            <div class="menu-start">PRESS ANY KEY TO START!</div>

            <!-- Sección de nombre del jugador -->
            <div class="player-input">
                <label for="player-name">PLAYER NAME:</label>
                <input type="text" id="player-name" maxlength="10" value="PLAYER1">
            </div>

            <!-- Tabla de récords -->
            <div class="high-scores">
                <h2>TOP 5 SCORES</h2>
                <table>
                    <thead>
                        <tr>
                            <th>RANK</th>
                            <th>PLAYER</th>
                            <th>SCORE</th>
                        </tr>
                    </thead>
                    <tbody id="scores-body">
                        <!-- Récords se cargarán con JS -->
                    </tbody>
                </table>
            </div>

            <!-- Controles del menú -->
            <div class="menu-controls">
                <div class="menu-row">
                    <span class="menu-label">CACHE</span>
                    <span class="menu-value">ON</span>
                </div>
                <div class="menu-row">
                    <span class="menu-label">MUSIC</span>
                    <span class="menu-value">OFF</span>
                </div>
            </div>
        </div>
        <div id="display" style="display: none;">
            <h1 class="title">Joc del Pong</h1>
            <div class="score" id="score-jugador1">0</div>
            <div class="score" id="score-jugador2">0</div>   
        </div>  
        <div id="divjoc" style="display: none;">
            <canvas id="joc" class="canvatable"></canvas>    
        </div>    
            
    </div>
</body>

<script src="js/jquery-3.7.1.js"></script>
<script src="js/punt.js"></script>
<script src="js/rectangle.js"></script>
<script src="js/segment.js"></script>
<script src="js/pala.js"></script>
<script src="js/bola.js"></script>
<script src="js/joc.js"></script>
<script src="js/app.js"></script>

<!-- Nuevo script para el menú -->
<script>
    $(document).ready(function() {
    // Cargar récords
    const highScores = [
        { name: "PRO", score: 8500 },
        { name: "MASTER", score: 7200 },
        { name: "ACE", score: 6800 },
        { name: "NOVA", score: 5500 },
        { name: "ROOKIE", score: 4200 }
    ];
    
    const $scoresBody = $('#scores-body');
    const $playerName = $('#player-name');
    
    // Mostrar los récords
    $.each(highScores, function(index, player) {
        $scoresBody.append(`
            <tr>
                <td>${index + 1}</td>
                <td>${player.name}</td>
                <td>${player.score}</td>
            </tr>
        `);
    });
    
    // Cargar nombre guardado si existe
    // const savedName = localStorage.getItem('playerName');
    // if(savedName) {
    //     $playerName.val(savedName);
    // }
    
    // Guardar nombre cuando cambia
    $playerName.on('change', function() {
        localStorage.setItem('playerName', $(this).val());
    });
    
    // Manejar Enter en el input
    $playerName.on('keypress', function(e) {
        if(e.which === 13) { // 13 es el código de Enter
            e.preventDefault();
            startGame();
        }
    });
    
    // Manejar otras teclas en el documento
    $(document).on('keydown', function(e) {
        // Solo iniciar si no está en el input y no es Enter
        if(!$(e.target).is('input') && e.which !== 13) {
            startGame();
        }
    });
    
    // Función para iniciar el juego
    function startGame() {
        const playerName = $playerName.val() || 'PLAYER1';
        localStorage.setItem('playerName', playerName);
        
        $('.menu').hide();
        $('#display, #divjoc').show();
    }
});
</script>

</html>